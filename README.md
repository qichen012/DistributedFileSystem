# ğŸŒ Distributed File Storage System

ä¸€ä¸ªç®€æ´é«˜æ•ˆçš„åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼Œæ”¯æŒæ–‡ä»¶åˆ‡å—ã€å¤šèŠ‚ç‚¹å†—ä½™å­˜å‚¨ã€å®¹é”™æ¢å¤ä¸å®¢æˆ·ç«¯ä¸Šä¼ ä¸‹è½½æ¥å£ã€‚è¯¥é¡¹ç›®é‡‡ç”¨ Python + FastAPI + MySQL + Dockerï¼Œç»“åˆåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ç†å¿µï¼Œé€‚åˆç³»ç»Ÿå­¦ä¹ ã€é¡¹ç›®å±•ç¤ºä¸å·¥ç¨‹å®è·µã€‚

---

## ğŸ§­ é¡¹ç›®èƒŒæ™¯

æœ¬é¡¹ç›®æ—¨åœ¨æ¨¡æ‹Ÿä¸€ä¸ªç®€åŒ–ç‰ˆçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ ã€åˆ†å—å­˜å‚¨ã€å¤šå‰¯æœ¬å†—ä½™ã€å…ƒæ•°æ®ç®¡ç†å’Œå­˜å‚¨èŠ‚ç‚¹ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œé‡ç‚¹åœ¨äºæ¶æ„è®¾è®¡ã€æ¨¡å—åŒ–å®ç°å’Œç³»ç»Ÿæ€§è®­ç»ƒã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- âœ… å¤§æ–‡ä»¶ä¸Šä¼ ä¸è‡ªåŠ¨åˆ‡å—ï¼ˆæ”¯æŒè‡ªå®šä¹‰å¤§å°ï¼‰
- âœ… å…ƒæ•°æ®æœåŠ¡ï¼ˆæ–‡ä»¶ä¿¡æ¯ã€å—åˆ†å¸ƒã€èŠ‚ç‚¹ç®¡ç†ï¼‰
- âœ… åˆ†å—å¤šå‰¯æœ¬å†—ä½™ï¼ˆå¯è‡ªå®šä¹‰å‰¯æœ¬æ•°ï¼‰
- âœ… å®¢æˆ·ç«¯ CLI å·¥å…·ï¼ˆä¸Šä¼ ã€ä¸‹è½½ã€æŸ¥è¯¢çŠ¶æ€ï¼‰
- âœ… å­˜å‚¨èŠ‚ç‚¹æ¨¡æ‹Ÿï¼ˆå¤šèŠ‚ç‚¹å¯æ°´å¹³æ‰©å±•ï¼‰
- âœ… èŠ‚ç‚¹å¿ƒè·³æ£€æµ‹ä¸å®¹é”™æ¢å¤
- âœ… æ§åˆ¶å™¨è‡ªåŠ¨è°ƒåº¦å—çš„åˆ†é…ä¸å‰¯æœ¬ä¿®å¤
- âœ… Docker Compose ä¸€é”®éƒ¨ç½²ï¼ˆæ”¯æŒæœ¬åœ°é›†ç¾¤æ¨¡æ‹Ÿï¼‰

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶             | æŠ€æœ¯æ–¹æ¡ˆ                     |
|------------------|------------------------------|
| åç«¯æ¡†æ¶         | FastAPI (Python 3.10)        |
| æ•°æ®æŒä¹…åŒ–       | MySQL 8.0                    |
| å­˜å‚¨èŠ‚ç‚¹         | Python + Flask (å¯æ‰©å±•ä¸º C++)|
| æ–‡ä»¶å®¢æˆ·ç«¯       | Python CLI + requests        |
| åˆ†å¸ƒå¼è°ƒåº¦å™¨     | Python æ§åˆ¶æ¨¡å—              |
| èŠ‚ç‚¹éƒ¨ç½²         | Docker + Docker Compose      |
| æµ‹è¯•å·¥å…·         | pytest + httpx               |

---

## ğŸ§± é¡¹ç›®æ¶æ„å›¾

            +---------------------+
            |     Client CLI      |
            +----------+----------+
                       |
                 Upload/Download
                       |
                +------v------+
                | Metadata API |
                +------+-------+
                       |
       +---------------+----------------+
       |                                |
+------v------+                  +------v------+
|  Scheduler  |  ------->        |   MySQL DB   |
+------+------+\                 +-------------+
       |       \______
       |               \
+----------v---------+ +---v-------------------+
| Storage Node A | | Storage Node B ... |
+--------------------+ +-----------------------+


---

## ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

```bash
DistributedFileSystem/
â”œâ”€â”€ client/               # å®¢æˆ·ç«¯ï¼šåˆ‡å—ä¸Šä¼ ã€ä¸‹è½½ã€å‘½ä»¤è¡Œæ¥å£
â”œâ”€â”€ metadata_server/      # FastAPI æœåŠ¡ï¼šæ–‡ä»¶å…ƒä¿¡æ¯ã€èŠ‚ç‚¹æ³¨å†Œ
â”œâ”€â”€ storage_nodes/        # æ¨¡æ‹Ÿå­˜å‚¨èŠ‚ç‚¹ï¼ˆæ”¯æŒåŠ¨æ€æ·»åŠ ï¼‰
â”œâ”€â”€ controller/           # è°ƒåº¦å™¨ï¼šå—å‰¯æœ¬åˆ†é…ä¸æ¢å¤
â”œâ”€â”€ common/               # å·¥å…·æ–¹æ³•ï¼ˆhashã€åˆ‡å—ã€é…ç½®ï¼‰
â”œâ”€â”€ tests/                # å•å…ƒæµ‹è¯•ã€æ¥å£æµ‹è¯•
â”œâ”€â”€ docs/                 # æ¶æ„å›¾ã€æ¥å£æ–‡æ¡£ã€è®¾è®¡è¯´æ˜
â”œâ”€â”€ docker-compose.yml    # ä¸€é”®éƒ¨ç½²å¤šä¸ªç»„ä»¶
â”œâ”€â”€ requirements.txt      # Python ä¾èµ–
â”œâ”€â”€ README.md             # é¡¹ç›®è¯´æ˜
â””â”€â”€ .env                  # ç¯å¢ƒå˜é‡ï¼ˆMySQL é…ç½®ç­‰ï¼‰

DistributedFileSystem/
â”œâ”€â”€ client/                           # å®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶çš„æ¨¡å—
â”‚   â”œâ”€â”€ cli.py                        # å®¢æˆ·ç«¯å‘½ä»¤è¡Œå…¥å£
â”‚   â””â”€â”€ client_api.py                # å®¢æˆ·ç«¯é€»è¾‘ï¼šåˆ‡å—ã€ä¸Šä¼ ã€ä¸å…ƒæ•°æ®æœåŠ¡äº¤äº’
â”‚
â”œâ”€â”€ metadata_server/                 # å…ƒæ•°æ®æœåŠ¡
â”‚   â”œâ”€â”€ app.py                        # FastAPI ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ db.py                         # æ•°æ®åº“è¿æ¥ï¼ˆSQLAlchemyï¼‰
â”‚   â”œâ”€â”€ models.py                     # ORM æ¨¡å‹
â”‚   â””â”€â”€ routes/                       # è·¯ç”±æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ file.py                  # æ–‡ä»¶ç›¸å…³è·¯ç”±ï¼šæ³¨å†Œæ–‡ä»¶ã€æŸ¥è¯¢å…ƒæ•°æ®
â”‚       â””â”€â”€ node.py                  # å­˜å‚¨èŠ‚ç‚¹æ³¨å†Œã€å¿ƒè·³ç­‰
â”‚
â”œâ”€â”€ storage_nodes/                   # å­˜å‚¨èŠ‚ç‚¹æ¨¡æ‹ŸæœåŠ¡
â”‚   â”œâ”€â”€ node.py                      # FastAPI æ¥æ”¶æ–‡ä»¶å—
â”‚   â””â”€â”€ data/                        # æ¨¡æ‹Ÿå­˜å‚¨ä½ç½®ï¼ˆå—æ–‡ä»¶ä¼šä¿å­˜åœ¨è¿™é‡Œï¼‰
â”‚
â”œâ”€â”€ common/                          # å…¬å…±ä»£ç æ¨¡å—
â”‚   â””â”€â”€ utils.py                     # å·¥å…·å‡½æ•°ï¼Œå¦‚æ–‡ä»¶æ ¡éªŒå’Œã€æ—¶é—´æˆ³ç­‰
â”‚
â”œâ”€â”€ controller/                      # è®¡åˆ’ä¸­çš„è°ƒåº¦æ¨¡å—ï¼ˆWeek 2 å¼€å§‹å¼€å‘ï¼‰
â”‚   â””â”€â”€ scheduler.py                 # èŠ‚ç‚¹è°ƒåº¦ã€è´Ÿè½½å‡è¡¡é€»è¾‘
â”‚
â”œâ”€â”€ tests/                           # æµ‹è¯•æ¨¡å—
â”‚   â””â”€â”€ test_register.py             # æµ‹è¯•å…ƒæ•°æ®æ³¨å†Œå’Œæ¥å£äº¤äº’
â”‚
â”œâ”€â”€ docs/                            # æ–‡æ¡£ä¸è®¾è®¡
â”‚   â”œâ”€â”€ schema.sql                   # MySQL è¡¨ç»“æ„å®šä¹‰
â”‚   â”œâ”€â”€ week1_summary.md             # ç¬¬ 1 å‘¨æ€»ç»“æ–‡æ¡£
â”‚   â””â”€â”€ architecture.drawio          # æ¶æ„å›¾
â”‚
â”œâ”€â”€ requirements.txt                 # Python ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜æ–‡ä»¶
â””â”€â”€ .gitignore                       # å¿½ç•¥æ–‡ä»¶é…ç½®




## ç¬¬ä¸€å‘¨é¡¹ç›®æ¶æ„å›¾

```mermaid
flowchart LR
    A[Client\n(æµè§ˆå™¨ / Postman / curl)]:::done -->|HTTP è¯·æ±‚\n(POST / GET)| B[FastAPI Web Server\n(metadata_server/app.py)]:::done
    B -->|å‡½æ•°è°ƒç”¨| C[æ•°æ®è®¿é—®å±‚\n(models / crud)]:::done
    C -->|SQL æŸ¥è¯¢| D[(MySQL æ•°æ®åº“å®¹å™¨)]:::done

    subgraph Docker å®¹å™¨
        D
    end

    classDef done fill:#9f6,stroke:#333,stroke-width:1px;
    classDef pending fill:#ccc,stroke:#333,stroke-width:1px;
